<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Registration</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <div class="container-fluid sticky-top bg-body-tertiary shadow-sm">
        <div class="container">
            <nav class="navbar navbar-expand-lg bg-body-tertiary navbar-light py-3 py-lg-0">
                <a href="index.html" class="navbar-brand">
                    <img src="img/medwise-removebg.png" alt="Medwise">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto py-0">
                        <a href="index.html" class="nav-item nav-link">Home</a>
                        <a href="about.html" class="nav-item nav-link">About</a>
                        <a href="service.html" class="nav-item nav-link">Service</a>
                        <a href="login.html" class="nav-item nav-link active">Login</a>
                        <a href="contact.html" class="nav-item nav-link">Contact</a>
                    </div>
                </div>
            </nav>
        </div>
    </div>

    <div class="container mt-5">
        <h2 class="text-center">Patient Registration Form</h2>
        <form id="patientForm" enctype="multipart/form-data">
            <h4>1. Personal Information</h4>
            <div class="form-group">
                <label for="fullName">Full Name</label>
                <input type="text" class="form-control" id="fullName" name="fullName" placeholder="Enter full name" required>
            </div>
            <div class="form-group">
                <label for="dob">Date of Birth</label>
                <input type="date" class="form-control" id="dob" name="dob" required>
            </div>
            <div class="form-group">
                <label for="gender">Gender</label>
                <select class="form-control" id="gender" name="gender" required>
                    <option>Select Gender</option>
                    <option>Male</option>
                    <option>Female</option>
                    <option>Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Enter email" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" class="form-control" id="phone" name="phone" placeholder="Enter phone number" required>
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" class="form-control" id="address" name="address" placeholder="Enter address" required>
            </div>

            <h4>2. Emergency Contact</h4>
            <div class="form-group">
                <label for="emergencyName">Name</label>
                <input type="text" class="form-control" id="emergencyName" name="emergencyName" placeholder="Enter emergency contact name" required>
            </div>
            <div class="form-group">
                <label for="emergencyPhone">Phone Number</label>
                <input type="tel" class="form-control" id="emergencyPhone" name="emergencyPhone" placeholder="Enter emergency contact phone number" required>
            </div>
            <div class="form-group">
                <label for="relation">Relation</label>
                <input type="text" class="form-control" id="relation" name="relation" placeholder="Relation to patient" required>
            </div>

            <h4>3. Health Information</h4>
            <div class="form-group">
                <label for="bloodGroup">Blood Group</label>
                <select class="form-control" id="bloodGroup" name="bloodGroup" required>
                    <option>Select Blood Group</option>
                    <option>A+</option>
                    <option>A-</option>
                    <option>B+</option>
                    <option>B-</option>
                    <option>O+</option>
                    <option>O-</option>
                    <option>AB+</option>
                    <option>AB-</option>
                </select>
            </div>
            <div class="form-group">
                <label for="medicalHistory">Medical History</label>
                <textarea class="form-control" id="medicalHistory" name="medicalHistory" rows="3" placeholder="Enter medical history"></textarea>
            </div>
            <div class="form-group">
                <label for="allergies">Allergies</label>
                <input type="text" class="form-control" id="allergies" name="allergies" placeholder="Enter allergies">
            </div>
            <div class="form-group">
                <label for="medications">Current Medications</label>
                <input type="text" class="form-control" id="medications" name="medications" placeholder="Enter medications">
            </div>

            <h4>4. Insurance Information</h4>
            <div class="form-group">
                <label for="insuranceProvider">Insurance Provider</label>
                <input type="text" class="form-control" id="insuranceProvider" name="insuranceProvider" placeholder="Enter insurance provider">
            </div>
            <div class="form-group">
                <label for="policyNumber">Policy Number</label>
                <input type="text" class="form-control" id="policyNumber" name="policyNumber" placeholder="Enter policy number">
            </div>

            <h4>5. ID Proof</h4>
            <div class="form-group">
                <label for="idProof">Upload ID Proof</label>
                <input type="file" class="form-control-file" id="idProof" name="idProof" required>
            </div>

            <h4>6. Login Information</h4>
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" class="form-control" id="username" name="username" placeholder="Enter username">
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" name="password" placeholder="Enter password" required>
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirm password" required>
            </div>

            <h4>7. Consent</h4>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="termsConsent" name="termsConsent" required>
                <label class="form-check-label" for="termsConsent">I agree to the Terms & Conditions</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="shareConsent" name="shareConsent" required>
                <label class="form-check-label" for="shareConsent">I consent to share my medical information</label>
            </div>

            <button type="submit" class="btn btn-primary mt-3">Register</button>
        </form>
    </div>

    <script>
        document.getElementById("patientForm").addEventListener("submit", async function (event) {
            event.preventDefault();
            const formData = new FormData(this);

            try {
                const response = await fetch("https://medwise-smart-healthcare.onrender.com/api/patients", {
                    method: "POST",
                    body: formData,
                });

                const data = await response.json();
                console.log("Response:", response);
                console.log("Response Data:", data);

                if (response.ok) {
                    alert("Registration successful!");
                    window.location.href = "patient_dashboard.html";
                   
                    
                } else {
                    alert("Error: " + data.message);
                    
                   
                }
            } catch (error) {
                console.error("Error submitting form:", error);
                alert("Failed to register. Check console for details.");
            }
        });
    </script>
</body>

</html>
